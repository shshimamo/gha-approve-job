name: Approve and Execute

on:
  workflow_dispatch:
    inputs:
      command:
        description: 'Command to execute'
        required: true
        type: string

jobs:
  approve:
    runs-on: ubuntu-latest
    environment: job-production
    steps:
      - name: Approved
        run: echo "Approval granted for command '${{ inputs.command }}'"

  execute:
    needs: approve
    runs-on: ubuntu-latest
    environment: job-production-execute
    steps:
      - name: Execute command
        run: |
          echo "=== Executing command ==="
          echo "${{ inputs.command }}"
          echo "=== Command completed ==="
